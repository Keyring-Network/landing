import React, { useState, useEffect } from 'react';
import { Link } from 'gatsby';
import classNames from 'classnames/bind';
import { useWindowScroll } from 'react-use';

import MobileMenu from './components/MobileMenu';
import * as menu from '../../constants/navMenu';
import * as styles from './Header.module.css';

const Header = () => {
  const [isOpen, setIsOpen] = useState(false);
  const [isScrolledDown, setScrollDown] = useState(false);
  const { y: verticalScrollCoordinate } = useWindowScroll();

  useEffect(() => {
    if (!verticalScrollCoordinate) {
      setScrollDown(false);
    }

    if (isScrolledDown) {
      return;
    }

    if (verticalScrollCoordinate) {
      setScrollDown(true);
    }
  }, [verticalScrollCoordinate]);

  const onCLickMenu = () => setIsOpen(!isOpen);

  return (
    <header
      className={
        classNames(
          styles.header,
          isOpen && styles.headerOpen,
          isScrolledDown && styles.scrolledHeader,
        )
      }
    >
      <div className={classNames('container', styles.container)}>
        <Link to="/">
          <svg xmlns="http://www.w3.org/2000/svg" width="152" height="42" viewBox="0 0 152 42" fill="none">
            <path fillRule="evenodd" clipRule="evenodd" d="M14.5068 4.07793C11.1577 4.07793 8.03895 5.04923 5.41269 6.72646L7.43287 9.22547C9.49942 7.98165 11.9212 7.26558 14.5069 7.26558C19.8493 7.26558 24.4758 10.3162 26.7457 14.7617L23.3599 16.4904C21.7142 13.2673 18.3659 11.0672 14.5069 11.0672C12.1393 11.0672 9.96974 11.8932 8.26323 13.2744L6.78487 14.4709L0.000881953 6.07894L1.47748 4.88382C5.03653 2.00319 9.57259 0.276367 14.5068 0.276367C15.7395 0.276367 16.9485 0.384196 18.1245 0.591379L17.465 4.33529C16.5057 4.1663 15.5174 4.07793 14.5068 4.07793ZM21.0698 5.39717C22.5456 6.01874 23.9156 6.84416 25.1445 7.83877L26.6219 9.03461L29.0136 6.07966L27.5362 4.88382C26.0329 3.66712 24.3551 2.65591 22.5455 1.89369L21.0698 5.39717ZM4.5741 21C4.5741 19.6674 4.83548 18.4007 5.30798 17.2447L1.78901 15.8064C1.13311 17.4111 0.772534 19.1658 0.772534 21C0.772534 24.0902 1.79539 26.947 3.52022 29.2429L6.55959 26.9594C5.31241 25.2993 4.5741 23.2386 4.5741 21ZM23.0404 26.087C22.1336 27.6042 20.8332 28.86 19.2817 29.7124L21.1123 33.0442C23.2567 31.866 25.0511 30.1329 26.3035 28.0373L23.0404 26.087ZM14.5069 30.9328C12.3644 30.9328 10.3854 30.2566 8.76446 29.1058L6.56371 32.2056C8.31747 33.4507 10.3775 34.2948 12.6061 34.6037L12.606 41.7236H14.5068C16.6872 41.7236 18.7923 41.3862 20.771 40.7595C21.375 40.5682 21.9669 40.35 22.5455 40.1063C24.3551 39.3441 26.0329 38.3328 27.5362 37.1162L29.0136 35.9203L26.6219 32.9654L25.1445 34.1612C23.9156 35.1558 22.5456 35.9812 21.0698 36.6028C20.598 36.8015 20.1154 36.9794 19.623 37.1354C18.5915 37.4621 17.5163 37.6929 16.4076 37.8166L16.4078 30.9328H14.5069ZM3.86916 34.1612L2.39168 32.9654L0 35.9203L1.47748 37.1162C3.50578 38.7578 5.85193 40.0254 8.41063 40.8119L9.52755 37.1781C7.4423 36.5372 5.52726 35.5032 3.86916 34.1612Z" fill="url(#paint0_linear_534_804)" />
            <path fillRule="evenodd" clipRule="evenodd" d="M14.5071 14.2548C10.7818 14.2548 7.76188 17.2747 7.76188 21C7.76188 24.7252 10.7818 27.7452 14.5071 27.7452C17.5723 27.7452 20.16 25.7006 20.9807 22.9008L24.2585 22.9008L27.6482 24.9358C28.0682 23.673 28.2413 22.328 28.2413 21C28.2413 20.356 28.1969 19.7214 28.1106 19.0992L20.9807 19.0992C20.16 16.2994 17.5723 14.2548 14.5071 14.2548ZM14.5071 18.0564C12.8813 18.0564 11.5634 19.3743 11.5634 21C11.5634 22.6257 12.8813 23.9436 14.5071 23.9436C16.1328 23.9436 17.4507 22.6257 17.4507 21C17.4507 19.3743 16.1328 18.0564 14.5071 18.0564Z" fill="url(#paint1_linear_534_804)" />
            <path d="M58.4052 33.8194H53.6326L46.0484 25.2732V33.8194H42.0527V7.92188H46.0484V23.4974L53.2257 15.3212H58.1092L49.97 24.3853L58.4052 33.8194Z" fill="white" />
            <path d="M60.9065 26.2722C61.2025 27.678 61.8808 28.7633 62.9413 29.5278C64.0019 30.2678 65.2968 30.6377 66.826 30.6377C68.9471 30.6377 70.5379 29.8731 71.5985 28.344L74.8912 30.2678C73.066 32.9562 70.3653 34.3004 66.789 34.3004C63.7799 34.3004 61.3505 33.3878 59.5006 31.5627C57.6508 29.7128 56.7259 27.382 56.7259 24.5703C56.7259 21.8079 57.6385 19.5018 59.4636 17.652C61.2888 15.7775 63.6319 14.8402 66.493 14.8402C69.2061 14.8402 71.4259 15.7898 73.1524 17.689C74.9035 19.5881 75.7791 21.8942 75.7791 24.6073C75.7791 25.0266 75.7298 25.5816 75.6311 26.2722H60.9065ZM60.8695 23.0165H71.7465C71.4752 21.5119 70.8462 20.3774 69.8597 19.6128C68.8978 18.8482 67.7632 18.4659 66.456 18.4659C64.9761 18.4659 63.7429 18.8728 62.7563 19.6868C61.7698 20.5007 61.1408 21.6106 60.8695 23.0165Z" fill="white" />
            <path d="M89.4473 15.3212H93.7019L86.5985 34.4114C84.8227 39.1963 81.8137 41.4654 77.5714 41.2188V37.4821C78.8293 37.5561 79.8405 37.2848 80.6051 36.6682C81.3697 36.0762 81.9986 35.139 82.4919 33.8564L82.6769 33.4865L74.8337 15.3212H79.1992L84.7117 28.7509L89.4473 15.3212Z" fill="white" />
            <path d="M99.1271 18.4289C100.138 16.1351 102.221 15.0439 104.825 15.3212V19.6498C103.295 19.5511 101.964 19.5881 100.829 20.4267C99.6944 21.2406 99.1271 22.5972 99.1271 24.4963V33.8194H95.1315V15.3212H99.1271V18.4289Z" fill="white" />
            <path d="M107.242 33.8194V15.3212H111.238V33.8194H107.242Z" fill="white" />
            <path d="M123.531 14.8402C125.653 14.8402 127.367 15.5185 128.674 16.875C129.981 18.2316 130.635 20.0937 130.635 22.4615V33.8194H126.639V22.8685C126.639 21.4873 126.269 20.4267 125.529 19.6868C124.789 18.9468 123.778 18.5769 122.496 18.5769C121.09 18.5769 119.955 19.0208 119.092 19.9088C118.229 20.772 117.797 22.1039 117.797 23.9044V33.8194H113.801V15.3212H117.797V17.689C119.006 15.7898 120.917 14.8402 123.531 14.8402Z" fill="white" />
            <path d="M148.079 15.3212H152.001V32.9685C152.001 35.7803 151.076 37.9384 149.226 39.4429C147.376 40.9474 144.865 41.6997 142.225 41.6997C137.958 41.6997 135.303 40.2075 133.724 37.2231L137.165 35.2253C138.127 37.1245 139.928 38.074 142.567 38.074C144.293 38.074 145.637 37.6178 146.599 36.7052C147.586 35.8173 148.079 34.5717 148.079 32.9685V30.7117C146.575 32.8575 144.429 33.9304 141.642 33.9304C139.027 33.9304 136.82 33.0055 135.019 31.1557C133.219 29.2812 132.319 27.0244 132.319 24.3853C132.319 21.7462 133.219 19.5018 135.019 17.652C136.82 15.7775 139.027 14.8402 141.642 14.8402C144.429 14.8402 146.575 15.9131 148.079 18.0589V15.3212ZM137.979 28.5289C139.114 29.6388 140.519 30.1938 142.197 30.1938C143.874 30.1938 145.267 29.6388 146.377 28.5289C147.512 27.419 148.079 26.0378 148.079 24.3853C148.079 22.7328 147.512 21.3516 146.377 20.2417C145.267 19.1318 143.874 18.5769 142.197 18.5769C140.519 18.5769 139.114 19.1318 137.979 20.2417C136.869 21.3516 136.314 22.7328 136.314 24.3853C136.314 26.0378 136.869 27.419 137.979 28.5289Z" fill="white" />
            <path d="M107.24 11.8167V7.80908H111.248V11.8167H107.24Z" fill="#29DBAA" />
            <defs>
              <linearGradient id="paint0_linear_534_804" x1="18.7174" y1="-4.67075" x2="10.6269" y2="46.1197" gradientUnits="userSpaceOnUse">
                <stop stopColor="#2EE297" />
                <stop offset="1" stopColor="#1DC9D4" />
              </linearGradient>
              <linearGradient id="paint1_linear_534_804" x1="18.7174" y1="-4.67075" x2="10.6269" y2="46.1197" gradientUnits="userSpaceOnUse">
                <stop stopColor="#2EE297" />
                <stop offset="1" stopColor="#1DC9D4" />
              </linearGradient>
            </defs>
          </svg>
        </Link>
        <MobileMenu menuList={menu.navMenu} open={isOpen} onCLickMenu={onCLickMenu} />
        <ul className={styles.menu}>
          {menu.navMenu.map((el) => (
            <li key={el.text}>
              <Link to={el.url} title={el.text}>{el.text}</Link>
            </li>
          ))}
        </ul>
      </div>
    </header>
  );
};

export default Header;
